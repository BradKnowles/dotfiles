#-------------------------------------------------------------------------------
# <auto-generated>
#     This code was generated by chezmoi - https://www.chezmoi.io/.
#     Version: {{ .chezmoi.version.version }}
#
#     Changes to this file may cause incorrect behavior and will be lost if
#     the code is regenerated.
#
#     Edit "$Env:USERPROFILE\.local\share\chezmoi\.chezmoi.yaml.tmpl" or run
#     Run `chezmoi edit-config-template` to change file.
#     Then run `chezmoi init` to apply changes.
# </auto-generated>
#-------------------------------------------------------------------------------
#chezmoi:template:line-endings=crlf
{{- $allRoles := list "Personal" "Work" "Client" -}}
{{- $roles := promptMultichoiceOnce . "roles" "What roles will this machine perform" $allRoles -}}
{{- $email := promptStringOnce . "git.email" "What is your email address" }}
{{- $gpgSigningKey := promptStringOnce . "git.gpgSigningKey" "Enter the GNUPG key id to be used for signing git commits" }}
---
encryption: age
age:
  identities:
{{- if has "Personal" $roles }}
    - ~\.local\share\age\personal.age.key
    - ~\.local\share\age\work.age.key
    - ~\.local\share\age\client.age.key
{{- end }}
{{- if has "Work" $roles }}
    - ~\.local\share\age\work.age.key
{{- end }}
{{- if has "Client" $roles }}
    - ~\.local\share\age\client.age.key
{{- end }}

cd:
  command: pwsh
  args: -NoLogo

interpreters:
  ps1:
    command: "pwsh"
    args: -NoLogo

{{- $dataGit := dict "git" (dict "email" $email "gpgSigningKey" $gpgSigningKey) }}
{{- $data := dict "data" $dataGit }}
{{- $_ := set $data.data "roles" $roles }}

{{ $data | toYaml }}
diff:
  command: "difft"
edit:
  command: "notepad4"

merge:
  command: C:\Program Files\Beyond Compare 5\BComp.exe
  args:
    - '{{ "{{ .Destination }}" }}'
    - '{{ "{{ .Source }}" }}'
    - '{{ "{{ .Target }}" }}'
    - '{{ "{{ .Source }}" }}'
